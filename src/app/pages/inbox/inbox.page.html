<ion-header>
  <ion-toolbar>
    <ion-title>Inbox</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ion-refresher slot="fixed" id="refresher" (ionRefresh)="doRefresh($event)">
    <ion-refresher-content></ion-refresher-content>
  </ion-refresher>
  <ion-list>
    <ion-virtual-scroll [approxItemHeight]="'20px'" [items]="inbox">
      <ion-item *virtualItem="let item" (click)="openChat(item)">
        <ion-grid>
          <ion-row>
            <ion-col size="2">
              <div>
                <ion-avatar style="width: 55px; height: 55px;">
                  <ion-img
                    [src]="'https://upload.wikimedia.org/wikipedia/commons/thumb/f/f9/OOjs_UI_icon_userAvatar-constructive.svg/1024px-OOjs_UI_icon_userAvatar-constructive.svg.png'"></ion-img>
                </ion-avatar>
              </div>
            </ion-col>
            <ion-col size="9">
              <h3 style="margin-top: 2px; margin-bottom: 0;">{{item.sender.username}}</h3>
              <p style="margin: 5px 0;">{{item.text.substr(0, 25)}}
                ...<small>{{item.message_at | date: 'hh:mm:ss'}}</small></p>
            </ion-col>
            <ion-col size="1" style="display: flex; justify-content: center; align-items: center;">
              <ion-icon [name]="item.seen?'checkmark-done-circle-outline':'checkmark-circle-outline'"
                        style="font-size: 25px;" [style.color]="item.seen?'#5a91f7': 'grey'"></ion-icon>
            </ion-col>
          </ion-row>
        </ion-grid>
      </ion-item>
    </ion-virtual-scroll>
  </ion-list>
</ion-content>
