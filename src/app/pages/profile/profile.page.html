<ion-header>
  <ion-toolbar>
    <ion-title>Profile</ion-title>
    <ion-buttons slot="end">
      <ion-button color="primary" size="small" (click)="goToEditProfile()">
        <ion-icon name="create-outline"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ion-list>
    <ion-item>
      <ion-grid>
        <ion-row>
          <ion-col>
            <ion-label>First name</ion-label>
          </ion-col>
          <ion-col class="ion-text-end">
            <ion-note>{{profile?.user.first_name}}</ion-note>
          </ion-col>
        </ion-row>
      </ion-grid>
    </ion-item>
    <ion-item>
      <ion-grid>
        <ion-row>
          <ion-col>
            <ion-label>Last name</ion-label>
          </ion-col>
          <ion-col class="ion-text-end">
            <ion-note>{{profile?.user.last_name}}</ion-note>
          </ion-col>
        </ion-row>
      </ion-grid>
    </ion-item>
    <ion-item>
      <ion-grid>
        <ion-row>
          <ion-col>
            <ion-label>Email</ion-label>
          </ion-col>
          <ion-col class="ion-text-end">
            <ion-note>{{profile?.user.email}}</ion-note>
          </ion-col>
        </ion-row>
      </ion-grid>
    </ion-item>
    <ion-item>
      <ion-grid>
        <ion-row>
          <ion-col>
            <ion-label>Phone number</ion-label>
          </ion-col>
          <ion-col class="ion-text-end">
            <ion-note>{{profile?.phone_number}}</ion-note>
          </ion-col>
        </ion-row>
      </ion-grid>
    </ion-item>
    <ion-item>
      <ion-grid>
        <ion-row>
          <ion-col>
            <ion-label>Country</ion-label>
          </ion-col>
          <ion-col class="ion-text-end">
            <ion-note>{{profile?.country}}</ion-note>
          </ion-col>
        </ion-row>
      </ion-grid>
    </ion-item>
    <ion-item>
      <ion-grid>
        <ion-row>
          <ion-col>
            <ion-label>ZIP Code</ion-label>
          </ion-col>
          <ion-col class="ion-text-end">
            <ion-note>{{profile?.zip_code}}</ion-note>
          </ion-col>
        </ion-row>
      </ion-grid>
    </ion-item>
    <ion-item>
      <ion-grid>
        <ion-row>
          <ion-col>
            <ion-label>City</ion-label>
          </ion-col>
          <ion-col class="ion-text-end">
            <ion-note>{{profile?.city}}</ion-note>
          </ion-col>
        </ion-row>
      </ion-grid>
    </ion-item>
    <ion-item>
      <ion-grid>
        <ion-row>
          <ion-col>
            <ion-label>State</ion-label>
          </ion-col>
          <ion-col class="ion-text-end">
            <ion-note>{{profile?.state}}</ion-note>
          </ion-col>
        </ion-row>
      </ion-grid>
    </ion-item>
    <ion-item>
      <ion-grid>
        <ion-row>
          <ion-col>
            <ion-label>Address</ion-label>
          </ion-col>
          <ion-col class="ion-text-end">
            <ion-note>{{profile?.address.place}}</ion-note>
          </ion-col>
        </ion-row>
      </ion-grid>
    </ion-item>
    <ion-item>
      <ion-grid>
        <ion-row>
          <ion-col>
            <ion-button (click)="openModal=true" expand="block" color="danger">Change password</ion-button>
          </ion-col>
        </ion-row>
      </ion-grid>
    </ion-item>
    <ion-item>
      <ion-grid>
        <ion-row>
          <ion-col class="ion-text-end">
            <ion-button (click)="logMeOut()" expand="block">Logout</ion-button>
          </ion-col>
        </ion-row>
      </ion-grid>
    </ion-item>
  </ion-list>
  <ion-modal [isOpen]="openModal">
    <ng-template>
      <ion-header translucent>
        <ion-toolbar>
          <ion-title>Change password</ion-title>
          <ion-buttons slot="end">
            <ion-button (click)="closeModal()">Close</ion-button>
          </ion-buttons>
        </ion-toolbar>
      </ion-header>
      <ion-content fullscreen>
        <form method="post" [formGroup]="changePasswordForm" (submit)="submitChangePasswordForm()">
          <ion-item style="margin: 10px 0;">
            <ion-label position="floating">Current password</ion-label>
            <ion-input formControlName="old_password" type="password"></ion-input>
            <span slot="error" *ngIf="changePasswordForm.get('old_password').invalid && (changePasswordForm.get('old_password').dirty || changePasswordForm.get('old_password').touched)">Field is required</span>
          </ion-item>
          <ion-item style="margin: 10px 0;">
            <ion-label position="floating">New password</ion-label>
            <ion-input formControlName="new_password" type="password"></ion-input>
            <span slot="error" *ngIf="changePasswordForm.get('new_password').invalid && (changePasswordForm.get('new_password').dirty || changePasswordForm.get('new_password').touched)">Field is required</span>
          </ion-item>
          <ion-item style="margin: 10px 0;">
            <ion-label position="floating">Re-new password</ion-label>
            <ion-input formControlName="re_new_password" type="password"></ion-input>
            <span slot="error" *ngIf="changePasswordForm.get('re_new_password').invalid && (changePasswordForm.get('re_new_password').dirty || changePasswordForm.get('re_new_password').touched)">Field is required</span>
          </ion-item>
          <ion-button expand="block" type="submit" color="primary">Save</ion-button>
        </form>
      </ion-content>
    </ng-template>
  </ion-modal>
</ion-content>
